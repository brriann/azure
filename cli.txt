https://docs.microsoft.com/en-us/cli/azure/install-azure-cli-windows?tabs=azure-cli
https://docs.microsoft.com/en-us/cli/azure/install-azure-cli-linux?pivots=apt

az login

az account set --subscription $subIdOrName

az group create --name $myResourceGRoup --location westus2

az storage account create /
  --name $myStorage \
  --location westus2 \
  --resource-group $myResourceGroup \
  --sku Standard_LRS \
  --kind BlobStorage \
  --access-tier Hot
  
# Get the resource ID of the Blob storage account.
storageid=$(az storage account show --name $storageName --resource-group $myResourceGroup --query id --output tsv)

az eventgrid event-subscription create \
  --source-resource-id $storageid \
  --name subToStorage \
  --endpoint $myEndpoint
  
az eventgrid event-subscription list
az eventgrid event-subscription list --topic-type-name "Microsoft.Resources.Subscriptions" --location global
az eventgrid event-subscription list --topic-type-name "Microsoft.Resources.ResourceGroups" --location global
az eventgrid event-subscription list --resource-group myResourceGroup --location global

az eventgrid event-subscription list --location westus2
az eventgrid event-subscription list --topic-type-name "Microsoft.EventGrid.Topics" --location "westus2"
az eventgrid event-subscription list --topic-type "Microsoft.Storage.StorageAccounts" --location westus2

resourceid=$(az resource show -n mystorage -g myResourceGroup --resource-type "Microsoft.Storage/storageaccounts" --query id --output tsv)
az eventgrid event-subscription list --resource-id $resourceid
